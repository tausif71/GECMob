(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"1OYU":function(e,t,s){"use strict";s.r(t),s.d(t,"DHCModule",function(){return K});var o=s("ofXK"),n=s("tyNb"),i=s("fXoL"),c=s("HfUu"),r=s("3Pt+"),a=s("0zL+"),b=s("iKI+"),u=s("pqM3"),l=s("hzby");function d(e,t){if(1&e&&(i.Sb(0,"option",30),i.Ic(1),i.Rb()),2&e){const e=t.$implicit;i.nc("value",e.SAPCode),i.zb(1),i.Lc(" ",e.SAPCode,"-",e.Name,"")}}function g(e,t){if(1&e&&(i.Sb(0,"option",30),i.Ic(1),i.Rb()),2&e){const e=t.$implicit;i.nc("value",e.Code),i.zb(1),i.Kc(" ",e.Desc,"")}}function f(e,t){1&e&&(i.Qb(0),i.Sb(1,"h5",31),i.Ic(2,"No Data Found"),i.Rb(),i.Pb())}function m(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",33),i.Sb(1,"div",34),i.Sb(2,"table",35),i.Sb(3,"tr"),i.Sb(4,"td"),i.Ic(5,"Issue No"),i.Rb(),i.Sb(6,"td"),i.Sb(7,"span",36),i.cc("click",function(){i.Ac(e);const s=t.$implicit;return i.gc(2).UpdateIssue(s.Issue_No)}),i.Ic(8),i.Rb(),i.Rb(),i.Rb(),i.Sb(9,"tr"),i.Sb(10,"td"),i.Ic(11,"Customer"),i.Rb(),i.Sb(12,"td"),i.Ic(13),i.Rb(),i.Rb(),i.Sb(14,"tr"),i.Sb(15,"td"),i.Ic(16,"Raise Date"),i.Rb(),i.Sb(17,"td"),i.Ic(18),i.Rb(),i.Rb(),i.Sb(19,"tr"),i.Sb(20,"td"),i.Ic(21,"Division"),i.Rb(),i.Sb(22,"td"),i.Ic(23),i.Rb(),i.Rb(),i.Sb(24,"tr"),i.Sb(25,"td"),i.Ic(26,"Status"),i.Rb(),i.Sb(27,"td"),i.Sb(28,"span",37),i.Ic(29),i.Rb(),i.Rb(),i.Rb(),i.Sb(30,"tr"),i.Sb(31,"td"),i.Ic(32,"Description"),i.Rb(),i.Sb(33,"td"),i.Sb(34,"span",38),i.Ic(35),i.Rb(),i.Nb(36,"br"),i.Ic(37),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Rb()}if(2&e){const e=t.$implicit;i.zb(8),i.Jc(e.Issue_No),i.zb(5),i.Lc("",e.Issue_Raise_For,"-",e.CA_Cust_Display_Name,""),i.zb(5),i.Jc(e.Issue_Raise_Date),i.zb(5),i.Jc(e.Division),i.zb(5),i.Fc("color","Open"==e.Issue_Status?"red":"green"),i.zb(1),i.Kc(" ",e.Issue_Status,""),i.zb(6),i.Jc(e.CategoryName),i.zb(2),i.Kc(" ",e.Issue_Description," ")}}function I(e,t){if(1&e&&(i.Qb(0),i.Gc(1,m,38,10,"div",32),i.Pb()),2&e){const e=i.gc();i.zb(1),i.nc("ngForOf",e.IssueDetailList)}}const p=function(){return{dateInputFormat:"DD/MM/YYYY"}};let S=(()=>{class e{constructor(e,t,s,o,n,i){this._authService=e,this.fb=t,this._customer=s,this._DHCService=o,this._router=n,this._EncDecService=i,this.userid=""}ngOnInit(){this.datePipe=new o.f("en-US"),this.userid=this._authService.getLoggedInUserid(),this.searchIssueForm=this.fb.group({CustCode:[""],CategoryID:[""],Status:[""],FromDate:[""],ToDate:[""],IssueNo:[""],UserID:this.userid}),this.GetCustomerAccountList(this._authService.getLoggedInUserid()),this.GetCategoryList(),this.SearchIssue()}GetCustomerAccountList(e){this._customer.GetCustomerAccount(e).subscribe(e=>{this.customerAccountList=e.Data._UserInfo[0].CustomerAccountList})}GetCategoryList(){this._DHCService.GetCategoryList().subscribe(e=>{this.CategoryList=e.Data.CategoryList})}changeDateFormat(e,t){e=this.datePipe.transform(e,"dd/MM/yyyy"),"fromdate"==t?this.searchIssueForm.get("FromDate").setValue(e):this.searchIssueForm.get("ToDate").setValue(e)}SearchIssue(){const e=this.searchIssueForm.getRawValue();""!=e.FromDate&&null!=e.FromDate&&(e.FromDate=e.FromDate.split("/").reverse().join("-")),""!=e.ToDate&&null!=e.ToDate&&(e.ToDate=e.ToDate.split("/").reverse().join("-")),console.log(e),this._DHCService.SearchIssueDetail(e).subscribe(e=>{"Success"==e.Message?(this.IssueDetailList=e.Data.DHCHeaderList,console.log(e.Data.DHCHeaderList)):this.IssueDetailList=null})}UpdateIssue(e){this._router.navigate(["DHC/update-issue",this._EncDecService.set(e)])}GoToHome(){this._router.navigate(["/dashboard"])}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(c.a),i.Mb(r.d),i.Mb(a.b),i.Mb(b.a),i.Mb(n.c),i.Mb(u.a))},e.\u0275cmp=i.Gb({type:e,selectors:[["app-issuedashboard"]],decls:55,vars:9,consts:[[1,"col-12","mt-2","text-right"],["routerLink","/DHC/raise-issue",1,"btn","btn-danger","btn-sm"],[1,"fa","fa-pen"],[3,"formGroup"],[1,"col-12"],[1,""],["for","CustomerCode"],["type","text","formControlName","CustCode",1,"custom-select","custom-select-sm","tx-12"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","fromdate"],[1,"fa","fa-calendar"],["type","text","formControlName","FromDate","autocomplete","off","id","fromdate","bsDatepicker","","onkeydown","return false;",1,"form-control","form-control-sm",3,"bsConfig","bsValueChange"],["for","todate"],["type","text","formControlName","ToDate","id","todate","autocomplete","off","bsDatepicker","","onkeydown","return false;",1,"form-control","form-control-sm","datepicker","date",3,"bsConfig","bsValueChange"],["for","issueno"],["type","text","formControlName","IssueNo","autocomplete","off","id","issueno",1,"form-control","form-control-sm"],["for","CategoryID"],["type","text","formControlName","CategoryID",1,"custom-select","custom-select-sm","tx-12"],["for","Status"],["type","text","formControlName","Status",1,"custom-select","custom-select-sm","tx-12"],["value","0"],["value","10"],["value","20"],[2,"margin-top","4%"],["type","button",1,"btn","btn-sm","btn-primary",2,"width","48%","float","left",3,"click"],["type","button",1,"btn","btn-sm","btn-primary",2,"width","48%","float","right",3,"click"],[1,"clearfix"],[1,"col-sm-12","col-xl-12",2,"padding-left","5px","padding-right","5px"],[4,"ngIf"],[3,"value"],[2,"text-align","center","color","red","font-weight","bold","margin-top","5%"],["class","card card-hover card-customer-score",4,"ngFor","ngForOf"],[1,"card","card-hover","card-customer-score"],[1,"card-body","pd-t-10"],[1,"table","table-sm","table-bordered"],[2,"font-weight","bold","text-decoration","underline","cursor","pointer",3,"click"],[2,"font-weight","bold"],[2,"text-decoration","underline"]],template:function(e,t){1&e&&(i.Sb(0,"div",0),i.Sb(1,"a",1),i.Nb(2,"i",2),i.Ic(3,"\xa0 Raise New Issue"),i.Rb(),i.Rb(),i.Sb(4,"form",3),i.Sb(5,"div",4),i.Sb(6,"div",5),i.Sb(7,"label",6),i.Ic(8,"User Account"),i.Rb(),i.Sb(9,"select",7),i.Sb(10,"option",8),i.Ic(11,"---Select Account List---"),i.Rb(),i.Gc(12,d,2,3,"option",9),i.Rb(),i.Rb(),i.Sb(13,"div",5),i.Sb(14,"label",10),i.Ic(15," From Date(DD/MM/YYYY)\xa0"),i.Nb(16,"i",11),i.Rb(),i.Sb(17,"input",12),i.cc("bsValueChange",function(e){return t.changeDateFormat(e,"fromdate")}),i.Rb(),i.Rb(),i.Sb(18,"div",5),i.Sb(19,"label",13),i.Ic(20,"To Date(DD/MM/YYYY)\xa0"),i.Nb(21,"i",11),i.Rb(),i.Sb(22,"input",14),i.cc("bsValueChange",function(e){return t.changeDateFormat(e,"todate")}),i.Rb(),i.Rb(),i.Sb(23,"div",5),i.Sb(24,"label",15),i.Ic(25,"Issue No"),i.Rb(),i.Nb(26,"input",16),i.Rb(),i.Sb(27,"div",5),i.Sb(28,"label",17),i.Ic(29,"Category"),i.Rb(),i.Sb(30,"select",18),i.Sb(31,"option",8),i.Ic(32,"---Select Category---"),i.Rb(),i.Gc(33,g,2,2,"option",9),i.Rb(),i.Rb(),i.Sb(34,"div",5),i.Sb(35,"label",19),i.Ic(36,"Status"),i.Rb(),i.Sb(37,"select",20),i.Sb(38,"option",8),i.Ic(39,"---Select All---"),i.Rb(),i.Sb(40,"option",21),i.Ic(41,"Pending"),i.Rb(),i.Sb(42,"option",22),i.Ic(43,"WIP"),i.Rb(),i.Sb(44,"option",23),i.Ic(45,"Closed"),i.Rb(),i.Rb(),i.Rb(),i.Sb(46,"div",24),i.Sb(47,"button",25),i.cc("click",function(){return t.SearchIssue()}),i.Ic(48,"SUBMIT"),i.Rb(),i.Sb(49,"button",26),i.cc("click",function(){return t.GoToHome()}),i.Ic(50," CANCEL "),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Nb(51,"div",27),i.Sb(52,"div",28),i.Gc(53,f,3,0,"ng-container",29),i.Gc(54,I,2,1,"ng-container",29),i.Rb()),2&e&&(i.zb(4),i.nc("formGroup",t.searchIssueForm),i.zb(8),i.nc("ngForOf",t.customerAccountList),i.zb(5),i.nc("bsConfig",i.qc(7,p)),i.zb(5),i.nc("bsConfig",i.qc(8,p)),i.zb(11),i.nc("ngForOf",t.CategoryList),i.zb(20),i.nc("ngIf",null==t.IssueDetailList),i.zb(1),i.nc("ngIf",null!=t.IssueDetailList))},directives:[n.d,r.v,r.m,r.g,r.t,r.l,r.e,r.p,r.w,o.n,r.b,l.b,l.a,o.o],styles:["table.table.table-sm.issuetable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px}table.table.table-sm.issuetable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{background-color:#7fffd4;width:40%}table.table.table-sm.table-bordered[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#eee}table.table.table-sm.table-bordered[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.card[_ngcontent-%COMP%]{border:none}.card-body[_ngcontent-%COMP%]{padding-left:9px;padding-right:9px}table.table.table-sm.table-bordered[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35%}"]}),e})();var h=s("tk/3");function R(e,t){if(1&e&&(i.Sb(0,"option",16),i.Ic(1),i.Rb()),2&e){const e=t.$implicit;i.nc("value",e.SAPCode),i.zb(1),i.Lc(" ",e.SAPCode,"-",e.Name,"")}}function C(e,t){1&e&&(i.Sb(0,"div",18),i.Ic(1," Customer code is required. "),i.Rb())}function D(e,t){if(1&e&&(i.Sb(0,"div"),i.Gc(1,C,2,0,"div",17),i.Rb()),2&e){const e=i.gc();i.zb(1),i.nc("ngIf",null==e.RaiseIssueForm.get("CustomerCode").errors?null:e.RaiseIssueForm.get("CustomerCode").errors.required)}}function v(e,t){if(1&e&&(i.Sb(0,"option",16),i.Ic(1),i.Rb()),2&e){const e=t.$implicit;i.nc("value",e.Code),i.zb(1),i.Kc(" ",e.Desc,"")}}function _(e,t){1&e&&(i.Sb(0,"div",18),i.Ic(1," Category is required. "),i.Rb())}function y(e,t){if(1&e&&(i.Sb(0,"div"),i.Gc(1,_,2,0,"div",17),i.Rb()),2&e){const e=i.gc();i.zb(1),i.nc("ngIf",null==e.RaiseIssueForm.get("CategoryID").errors?null:e.RaiseIssueForm.get("CategoryID").errors.required)}}function F(e,t){1&e&&(i.Sb(0,"div",18),i.Ic(1," Description is required. "),i.Rb())}function L(e,t){if(1&e&&(i.Sb(0,"div"),i.Gc(1,F,2,0,"div",17),i.Rb()),2&e){const e=i.gc();i.zb(1),i.nc("ngIf",null==e.RaiseIssueForm.get("Description").errors?null:e.RaiseIssueForm.get("Description").errors.required)}}let x=(()=>{class e{constructor(e,t,s,o,n,i){this._authService=e,this.fb=t,this._customer=s,this._DHCService=o,this._router=n,this.http=i,this.userid=""}ngOnInit(){this.userid=this._authService.getLoggedInUserid(),this.RaiseIssueForm=this.fb.group({CustomerCode:["",r.u.required],CategoryID:["",r.u.required],Division:["I2"],Description:["",r.u.required],FileString:[""],UserID:this.userid,Extension:[""]}),this.GetCustomerAccountList(this._authService.getLoggedInUserid()),this.GetCategoryList()}GetCustomerAccountList(e){this._customer.GetCustomerAccount(e).subscribe(e=>{this.customerAccountList=e.Data._UserInfo[0].CustomerAccountList})}GetCategoryList(){this._DHCService.GetCategoryList().subscribe(e=>{this.CategoryList=e.Data.CategoryList})}SubmitIssueDetail(){this._DHCService.RaiseIssue(this.RaiseIssueForm.value).subscribe(e=>{"Success"==e.Message&&(alert("Feedback submitted successfully."),this._router.navigate(["DHC/issue-dashboard"]))})}onFileSelect(e){const t=new RegExp("(.*?).(bmp|gif|png|jpg|jpeg|doc|doc|xls|mp4|docx|xlsx|txt|pdf)$");if(e.target.files.length>0){let s=e.target.files[0].name.lastIndexOf(".");if(s=e.target.files[0].name.slice(s),t.test(s)){const t=e.target.files[0],s=e.target.value.slice(2+(e.target.value.lastIndexOf(".")-1>>>0)),o=new FileReader;o.onloadend=()=>{var e=o.result.toString().split(";base64,")[1];console.log(e),this.RaiseIssueForm.get("FileString").setValue(e),this.RaiseIssueForm.get("Extension").setValue(s),this.RaiseIssueForm.enable()},e.target.files[0]&&o.readAsDataURL(t)}else alert("Please select correct file format"),this.RaiseIssueForm.disable()}}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(c.a),i.Mb(r.d),i.Mb(a.b),i.Mb(b.a),i.Mb(n.c),i.Mb(h.b))},e.\u0275cmp=i.Gb({type:e,selectors:[["app-raise-issue"]],decls:35,vars:7,consts:[[2,"text-align","center","background","#eee","padding","6px"],["enctype","multipart/form-data",3,"formGroup"],[1,"col-12"],[1,""],["for","CustomerCode"],["type","text","required","","formControlName","CustomerCode",1,"custom-select","custom-select-sm","tx-12"],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["for","CategoryID"],["type","text","required","","formControlName","CategoryID",1,"custom-select","custom-select-sm","tx-12"],["for","Description"],["formControlName","Description","required","",1,"form-control","form-control-sm",2,"min-height","100px","resize","none"],["for","fileupload"],["type","file",1,"form-control",2,"padding","4px",3,"change"],["type","button",1,"btn","btn-sm","btn-primary","btn-block",2,"padding-top","2px","padding-bottom","2px","margin-top","3%",3,"disabled","click"],[3,"value"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(e,t){1&e&&(i.Sb(0,"h5",0),i.Ic(1,"Raise New Issue"),i.Rb(),i.Sb(2,"form",1),i.Sb(3,"div",2),i.Sb(4,"div",3),i.Sb(5,"label",4),i.Ic(6,"User Account"),i.Rb(),i.Sb(7,"select",5),i.Sb(8,"option",6),i.Ic(9,"---Select Account List---"),i.Rb(),i.Gc(10,R,2,3,"option",7),i.Rb(),i.Gc(11,D,2,1,"div",8),i.Rb(),i.Rb(),i.Sb(12,"div",2),i.Sb(13,"div",3),i.Sb(14,"label",9),i.Ic(15,"Category"),i.Rb(),i.Sb(16,"select",10),i.Sb(17,"option",6),i.Ic(18,"---Select Category---"),i.Rb(),i.Gc(19,v,2,2,"option",7),i.Rb(),i.Gc(20,y,2,1,"div",8),i.Rb(),i.Rb(),i.Sb(21,"div",2),i.Sb(22,"div",3),i.Sb(23,"label",11),i.Ic(24,"Please Describe the Issue here"),i.Rb(),i.Nb(25,"textarea",12),i.Gc(26,L,2,1,"div",8),i.Rb(),i.Rb(),i.Sb(27,"div",2),i.Sb(28,"div",3),i.Sb(29,"label",13),i.Ic(30,"File Upload"),i.Rb(),i.Sb(31,"input",14),i.cc("change",function(e){return t.onFileSelect(e)}),i.Rb(),i.Rb(),i.Rb(),i.Sb(32,"div",2),i.Sb(33,"button",15),i.cc("click",function(){return t.SubmitIssueDetail()}),i.Ic(34,"SUBMIT"),i.Rb(),i.Rb(),i.Rb()),2&e&&(i.zb(2),i.nc("formGroup",t.RaiseIssueForm),i.zb(8),i.nc("ngForOf",t.customerAccountList),i.zb(1),i.nc("ngIf",!t.RaiseIssueForm.get("CustomerCode").valid&&t.RaiseIssueForm.get("CustomerCode").touched),i.zb(8),i.nc("ngForOf",t.CategoryList),i.zb(1),i.nc("ngIf",!t.RaiseIssueForm.get("CategoryID").valid&&t.RaiseIssueForm.get("CategoryID").touched),i.zb(6),i.nc("ngIf",!t.RaiseIssueForm.get("Description").valid&&t.RaiseIssueForm.get("Description").touched),i.zb(7),i.nc("disabled",!t.RaiseIssueForm.valid))},directives:[r.v,r.m,r.g,r.t,r.s,r.l,r.e,r.p,r.w,o.n,o.o,r.b],styles:[""]}),e})();function w(e,t){if(1&e&&(i.Sb(0,"div",11),i.Ic(1,"Update Concern Status"),i.Nb(2,"br"),i.Ic(3),i.Rb()),2&e){const e=i.gc();i.zb(3),i.Jc(e.IssueDetailList[0].Issue_No)}}function M(e,t){if(1&e){const e=i.Tb();i.Qb(0),i.Sb(1,"tr"),i.Sb(2,"td"),i.Ic(3,"Name"),i.Rb(),i.Sb(4,"td"),i.Ic(5),i.Rb(),i.Rb(),i.Sb(6,"tr"),i.Sb(7,"td"),i.Ic(8,"Product Category"),i.Rb(),i.Sb(9,"td"),i.Ic(10),i.Rb(),i.Rb(),i.Sb(11,"tr"),i.Sb(12,"td"),i.Ic(13,"Raise On Date"),i.Rb(),i.Sb(14,"td"),i.Ic(15),i.Rb(),i.Rb(),i.Sb(16,"tr"),i.Sb(17,"td"),i.Ic(18,"Issue Status"),i.Rb(),i.Sb(19,"td"),i.Ic(20),i.Rb(),i.Rb(),i.Sb(21,"tr"),i.Sb(22,"td"),i.Ic(23,"Issue"),i.Rb(),i.Sb(24,"td"),i.Ic(25),i.Rb(),i.Rb(),i.Sb(26,"tr"),i.Sb(27,"td"),i.Ic(28,"Issue Description"),i.Rb(),i.Sb(29,"td"),i.Ic(30),i.Rb(),i.Rb(),i.Sb(31,"tr"),i.Sb(32,"td"),i.Ic(33,"Expected Resolution Date"),i.Rb(),i.Sb(34,"td"),i.Ic(35),i.Rb(),i.Rb(),i.Sb(36,"tr"),i.Sb(37,"td"),i.Ic(38,"Attachment"),i.Rb(),i.Sb(39,"td"),i.Sb(40,"span",13),i.cc("click",function(){i.Ac(e);const s=t.$implicit;return i.gc(2).DownloadFile(s.Issue_FilePath)}),i.Ic(41,"Download Attachment"),i.Rb(),i.Rb(),i.Rb(),i.Pb()}if(2&e){const e=t.$implicit;i.zb(5),i.Lc("",e.Issue_Raise_For,"-",e.CA_Cust_Display_Name,""),i.zb(5),i.Jc(e.Division),i.zb(5),i.Jc(e.Issue_Raise_Date),i.zb(5),i.Jc(e.CurrentStatus),i.zb(5),i.Jc(e.CategoryName),i.zb(5),i.Jc(e.Issue_Description),i.zb(5),i.Jc(""==e.Issue_Resolution_Date?"NA":e.Issue_Resolution_Date)}}function z(e,t){if(1&e&&(i.Qb(0),i.Gc(1,M,42,8,"ng-container",12),i.Pb()),2&e){const e=i.gc();i.zb(1),i.nc("ngForOf",e.IssueDetailList)}}function P(e,t){1&e&&(i.Qb(0),i.Sb(1,"h6",14),i.Ic(2,"No Data Found"),i.Rb(),i.Pb())}function O(e,t){1&e&&(i.Sb(0,"div",21),i.Ic(1," Description is required. "),i.Rb())}function G(e,t){if(1&e&&(i.Sb(0,"div"),i.Gc(1,O,2,0,"div",20),i.Rb()),2&e){const e=i.gc(2);i.zb(1),i.nc("ngIf",null==e.updateIssueForm.get("IssueComment").errors?null:e.updateIssueForm.get("IssueComment").errors.required)}}function H(e,t){1&e&&(i.Sb(0,"div",23),i.Ic(1,"Note : This request is already closed."),i.Rb())}function A(e,t){if(1&e&&(i.Qb(0),i.Gc(1,H,2,0,"div",22),i.Pb()),2&e){const e=i.gc(2);i.zb(1),i.nc("ngIf","20"==e.IssueDetailList[0].Issue_Status)}}function N(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",15),i.Sb(1,"form",16),i.Nb(2,"textarea",17),i.Gc(3,G,2,1,"div",5),i.Sb(4,"button",18),i.cc("click",function(){return i.Ac(e),i.gc().UpdateIssue()}),i.Ic(5,"Save"),i.Rb(),i.Sb(6,"button",19),i.cc("click",function(){return i.Ac(e),i.gc().ResolvedIssue()}),i.Ic(7,"Resolved"),i.Rb(),i.Gc(8,A,2,1,"ng-container",5),i.Rb(),i.Rb()}if(2&e){const e=i.gc();i.zb(1),i.nc("formGroup",e.updateIssueForm),i.zb(2),i.nc("ngIf",!e.updateIssueForm.get("IssueComment").valid&&e.updateIssueForm.get("IssueComment").touched),i.zb(1),i.nc("disabled",!e.updateIssueForm.valid),i.zb(2),i.nc("disabled",!e.updateIssueForm.valid),i.zb(2),i.nc("ngIf",null!=e.IssueDetailList)}}function k(e,t){1&e&&(i.Qb(0),i.Sb(1,"li"),i.Ic(2,"No Conversation found"),i.Rb(),i.Pb())}function U(e,t){if(1&e&&(i.Sb(0,"h6",30),i.Ic(1,"Customer: "),i.Sb(2,"span"),i.Ic(3),i.Rb(),i.Rb()),2&e){const e=i.gc().$implicit;i.zb(3),i.Jc(e.Create_Date)}}function T(e,t){if(1&e&&(i.Sb(0,"h6",30),i.Ic(1,"Sales Person: "),i.Sb(2,"span"),i.Ic(3),i.Rb(),i.Rb()),2&e){const e=i.gc().$implicit;i.zb(3),i.Jc(e.Create_Date)}}function E(e,t){if(1&e&&(i.Qb(0),i.Sb(1,"li",24),i.Sb(2,"div",25),i.Sb(3,"span",26),i.Nb(4,"i",27),i.Rb(),i.Rb(),i.Sb(5,"div",28),i.Gc(6,U,4,1,"h6",29),i.Gc(7,T,4,1,"h6",29),i.Sb(8,"p"),i.Sb(9,"span",27),i.Ic(10),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Pb()),2&e){const e=t.$implicit;i.zb(1),i.nc("ngClass","SP"==e.flag?"reverse":""),i.zb(2),i.nc("ngClass","ED"==e.flag?"userClass":"salesPersonClass"),i.zb(1),i.nc("ngClass","SP"==e.flag?"fa fa-tty":"fa fa-user"),i.zb(2),i.nc("ngIf","ED"==e.flag),i.zb(1),i.nc("ngIf","SP"==e.flag),i.zb(2),i.nc("ngClass","ED"==e.flag?"userClass":""),i.zb(1),i.Jc(e.Remarks)}}function q(e,t){if(1&e&&(i.Qb(0),i.Gc(1,E,11,7,"ng-container",12),i.Pb()),2&e){const e=i.gc();i.zb(1),i.nc("ngForOf",e.IssueDetailList[0].Remarks)}}s("Iab2");const J=[{path:"issue-dashboard",component:S},{path:"raise-issue",component:x},{path:"update-issue/:issueno",component:(()=>{class e{constructor(e,t,s,o,n,i){this._AuthService=e,this._DHCService=t,this._EncDecService=s,this._router=o,this._activeRoute=n,this.fb=i}ngOnInit(){this.userid=this._AuthService.getLoggedInUserid(),this.updateIssueForm=this.fb.group({CustomerCode:[""],IssueHeaderID:[""],IssueDetailID:[""],IssueResolution:[""],IssueResolutionDate:[""],CategoryID:[""],Division:[""],Status:[""],IssueComment:["",r.u.required],IssueNo:[""],Action:[""],UserID:this.userid}),this._activeRoute.params.subscribe(e=>{let t=e.issueno;null!=t&&(t=this._EncDecService.get(t),this.GetIssueDetailbyIssueNo(t))})}GetIssueDetailbyIssueNo(e){this._DHCService.GetIssueDetailByIssueNo({IssueNo:e,UserID:this._AuthService.getLoggedInUserid()}).subscribe(e=>{console.log(e.Data.DHCHeaderList),"Success"==e.Message?(this.IssueDetailList=e.Data.DHCHeaderList,this.updateIssueForm.patchValue({CustomerCode:e.Data.DHCHeaderList[0].Issue_Raise_For,IssueHeaderID:e.Data.DHCHeaderList[0].Issue_Detail_ID,IssueDetailID:e.Data.DHCHeaderList[0].ID,IssueResolution:e.Data.DHCHeaderList[0].Issue_Resolution,IssueResolutionDate:e.Data.DHCHeaderList[0].Issue_Resolution_Date,CategoryID:e.Data.DHCHeaderList[0].Issue_Category_ID,IssueNo:e.Data.DHCHeaderList[0].Issue_No,Division:e.Data.DHCHeaderList[0].Issue_Prod_Category}),"20"==e.Data.DHCHeaderList[0].Issue_Status&&this.updateIssueForm.disable()):this.IssueDetailList=null})}UpdateIssue(){this.updateIssueForm.get("Action").setValue("Save"),this.updateIssueForm.get("Status").setValue("0"),this._DHCService.UpdateIssueDetail(this.updateIssueForm.value).subscribe(e=>{"Success"==e.Message&&(alert("Feedback submitted successfully."),this._router.navigate(["DHC/issue-dashboard"]))})}DownloadFile(e){window.open(e,"_blank")}ResolvedIssue(){this.updateIssueForm.get("Action").setValue("update"),this.updateIssueForm.get("Status").setValue("20"),this._DHCService.UpdateIssueDetail(this.updateIssueForm.value).subscribe(e=>{"Success"==e.Message&&(alert("Feedback closed successfully."),this._router.navigate(["DHC/issue-dashboard"]))})}DownloadAttachment(e){this._DHCService.DownloadAttachment(e).subscribe(e=>{"Success"!=e.Message&&alert("something went wrong")})}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(c.a),i.Mb(b.a),i.Mb(u.a),i.Mb(n.c),i.Mb(n.a),i.Mb(r.d))},e.\u0275cmp=i.Gb({type:e,selectors:[["app-update-issue"]],decls:15,vars:6,consts:[[1,"content-body",2,"padding","4px"],[1,"card"],["class","card-header tx-medium",4,"ngIf"],[1,"card-body",2,"padding","0px"],[1,"table","table-sm","table-bordered","issuetable"],[4,"ngIf"],["class","col","style","padding-left: 4px;padding-right: 4px;",4,"ngIf"],[1,"mt-3",2,"padding","10px","background","#e4e4e4","font-weight","bold"],[1,"fa","fa-comments"],[2,"min-height","300px","max-height","200px","overflow","scroll"],[1,"chat-msg-list"],[1,"card-header","tx-medium"],[4,"ngFor","ngForOf"],[2,"text-decoration","underline","color","blue",3,"click"],[1,"text-center","mt-4",2,"color","red"],[1,"col",2,"padding-left","4px","padding-right","4px"],[3,"formGroup"],["required","","formControlName","IssueComment",1,"form-control","form-control-sm",2,"min-height","100px"],["type","button",1,"btn","btn-primary","btn-w48","mt-2",3,"disabled","click"],["type","button",1,"btn","btn-danger","btn-w48","mt-2",2,"float","right",3,"disabled","click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["style","font-size: 13px;color: #eeeded;background: #ff0024;font-weight: bold;font-family: inherit;margin-top: 2%;padding-left: 8px;",4,"ngIf"],[2,"font-size","13px","color","#eeeded","background","#ff0024","font-weight","bold","font-family","inherit","margin-top","2%","padding-left","8px"],[1,"msg-item",3,"ngClass"],[1,"avatar","avatar-sm"],[1,"avatar-initial","rounded-circle",3,"ngClass"],[3,"ngClass"],[1,"msg-body"],["class","msg-user",4,"ngIf"],[1,"msg-user"]],template:function(e,t){1&e&&(i.Sb(0,"div",0),i.Sb(1,"div",1),i.Gc(2,w,4,1,"div",2),i.Sb(3,"div",3),i.Sb(4,"table",4),i.Gc(5,z,2,1,"ng-container",5),i.Gc(6,P,3,0,"ng-container",5),i.Rb(),i.Gc(7,N,9,5,"div",6),i.Sb(8,"h6",7),i.Nb(9,"i",8),i.Ic(10," Comment(s)"),i.Rb(),i.Sb(11,"div",9),i.Sb(12,"ul",10),i.Gc(13,k,3,0,"ng-container",5),i.Gc(14,q,2,1,"ng-container",5),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&e&&(i.zb(2),i.nc("ngIf",null!=t.IssueDetailList),i.zb(3),i.nc("ngIf",null!=t.IssueDetailList),i.zb(1),i.nc("ngIf",null==t.IssueDetailList),i.zb(1),i.nc("ngIf",null!=t.IssueDetailList),i.zb(6),i.nc("ngIf",null==t.IssueDetailList),i.zb(1),i.nc("ngIf",null!=t.IssueDetailList))},directives:[o.o,o.n,r.v,r.m,r.g,r.b,r.s,r.l,r.e,o.m],styles:[".issuetable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px}table.table.table-sm.table-bordered.issuetable[_ngcontent-%COMP%]:first-child   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{background:#2289d5;color:#fff;width:40%}.card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #fff;color:#000;margin-bottom:0;padding:6px!important;text-align:center}.btn-w48[_ngcontent-%COMP%]{width:48%}.msg-user[_ngcontent-%COMP%]{font-size:.8125rem;margin-bottom:6px}.userClass[_ngcontent-%COMP%]{background-color:#ff0158;color:#fff}.salesPersonClass[_ngcontent-%COMP%]{background-color:#5556fd;color:#fff}"]}),e})()}];let j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({imports:[[n.e.forChild(J)],n.e]}),e})();var V=s("To8U"),Y=s("dlKe"),$=s("xJkR");let K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({imports:[[o.c,j,V.a,r.i,r.r,l.c,Y.b,$.b]]}),e})()},Iab2:function(e,t,s){var o,n;void 0===(n="function"==typeof(o=function(){"use strict";function t(e,t,s){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){c(o.response,t,s)},o.onerror=function(){console.error("could not download file")},o.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(s)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,i,c){var r=n.URL||n.webkitURL,a=document.createElement("a");a.download=i=i||e.name||"download",a.rel="noopener","string"==typeof e?(a.href=e,a.origin===location.origin?o(a):s(a.href)?t(e,i,c):o(a,a.target="_blank")):(a.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){o(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(s(e))t(e,n,i);else{var c=document.createElement("a");c.href=e,c.target="_blank",setTimeout(function(){o(c)})}}:function(e,s,o,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof e)return t(e,s,o);var r="application/octet-stream"===e.type,a=/constructor/i.test(n.HTMLElement)||n.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||r&&a||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=b?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=e:location=e,c=null},u.readAsDataURL(e)}else{var l=n.URL||n.webkitURL,d=l.createObjectURL(e);c?c.location=d:location.href=d,c=null,setTimeout(function(){l.revokeObjectURL(d)},4e4)}});n.saveAs=c.saveAs=c,e.exports=c})?o.apply(t,[]):o)||(e.exports=n)}}]);